<form cg-busy="assignProduct.loading">
    <div class="modal-header">
        <button type="button" class="close" aria-label="Close" ng-click="assignProduct.cancel()"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title">Select Product(s) to add to {{assignProduct.category.Name}}</h3>
    </div>
    <div class="modal-body">
        <!--====== SEARCH/FILTERS ======-->
        <form></form>
        <div class="row">
            <div class="col-sm-5">
                <form name="ProductsSearchForm" class="form-inline">
                    <fieldset class="form-group">
                        <input type="search" placeholder="Search Products..." ng-model="assignProduct.parameters.search" class="form-control">
                    </fieldset>
                    <fieldset class="form-group" ng-class="{'text-center':application.$ocMedia('max-width:767px')}">
                        <span ng-class="{'btn-group':assignProduct.searchResults}">
			        <button ng-click="assignProduct.search()" class="btn btn-primary">Search</button>
			        <button ng-if="assignProduct.searchResults" ng-click="assignProduct.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>
		        </span>
                    </fieldset>
                </form>
            </div>
            <div class="col-sm-4 col-sm-offset-3">
                <div class="form-group" >
                    <div ng-class="{'input-group':assignProduct.sortSelection}">
                        <select placeholder="Sort" class="form-control" ng-model="assignProduct.sortSelection" ng-change="assignProduct.updateSort()">
                        <option value="">Sort By</option>
                        <option value="ID">ID</option>
                        <option value="Name">Name</option>
                    </select>
                        <div ng-if="assignProduct.sortSelection" class="input-group-btn">
                            <button class="btn btn-default" ng-click="assignProduct.reverseSort()">
                            <i class="fa fa-sort"></i>
                        </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--====== LIST ======-->
        <div class="no-matches" ng-if="!assignProduct.list.Items.length">
            <b>No matches found.</b>
        </div>
        <div ng-if="assignProduct.list.Items.length">
            <b class="pull-right">{{(application.$ocMedia('min-width:768px') ? assignProduct.list.Meta.ItemRange[0] : '1') + ' - ' +  assignProduct.list.Meta.ItemRange[1] + ' of ' + assignProduct.list.Meta.TotalCount + ' results'}}</b>
            <table class="table table-hover oc-table-responsive table-bordered">
                <thead>
                    <tr>
                        <th>Selected</th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="product in assignProduct.list.Items">
                        <td data-title="Selected">
                            <div class="text-center">
                                <i class="fa fa-lg" 
                                ng-class="{
                                    'fa-square-o':!product.selected, 
                                    'fa-check-square-o text-success': product.selected
                                    }" 
                                aria-hidden="true"
                                ng-click="product.selected = !product.selected"
                            ></i>
                            </div>
                        </td>
                        <td data-title="ID">{{product.ID}}</td>
                        <td data-title="Name">{{product.Name}}</td>
                        <td data-title="Description">{{product.Description}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!--====== Pagination ======-->
    <div class="text-center" ng-if="application.$ocMedia('min-width:768px') && assignProduct.list.Meta.TotalPages > 1">
        <uib-pagination 
            boundary-links="assignProduct.list.Meta.TotalPages > 5" 
            max-size="5" total-items="assignProduct.list.Meta.TotalCount" 
            items-per-page="assignProduct.list.Meta.PageSize" 
            ng-model="assignProduct.list.Meta.Page" 
            ng-change="assignProduct.pageChanged()">
        </uib-pagination>
    </div>
    <button type="button" 
            ng-if="application.$ocMedia('max-width:767px')" 
            class="btn btn-default btn-block btn-lg" 
            ng-show="assignProduct.list.Meta.Page < assignProduct.list.Meta.TotalPages" 
            ng-click="assignProduct.loadMore()">Load More
    </button>
    <div class="modal-footer">
        <button class="btn btn-primary form-control">Add Selected Products</button>
    </div>
</form>