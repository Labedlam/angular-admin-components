<div class="modal-header">
	<button type="button" class="close" aria-label="Close" ng-click="createAssignmentModal.cancel()"><span aria-hidden="true">&times;</span></button>
	<div class="well well-lg text-center" ng-if="(!((createAssignmentModal.priceSchedules | filter:{OrderType:'Replenishment'}).length) && !((createAssignmentModal.priceSchedules | filter:{OrderType:'Standard'}).length))">
		<b>The selected buyer does not have any Standard or Replenishment price schedules.</b><br>
		<b>If you have included the Price Schedules component you can create them there.</b>
	</div>
</div>
<div class="modal-body">
	<div ng-if="(createAssignmentModal.priceSchedules | filter:{OrderType:'Replenishment'}).length || (createAssignmentModal.priceSchedules | filter:{OrderType:'Standard'}).length">
		<h3>Choose the assignee(s)</h3>
		<p class="text-muted">You can assign a product to a specific UserGroup or to the entire Buyer Company.  UserGroup assignments will take precedent over Buyer assignments.</p>
		<div class="row" >
			<div class="col-sm-6">
				<div class="form-group">
					<button class="btn btn-block btn-default" ng-class="{active: createAssignmentModal.assignBuyer}" ng-click="createAssignmentModal.assignBuyer = !createAssignmentModal.assignBuyer">
						<i class="fa" ng-class="{'fa-square-o':!createAssignmentModal.assignBuyer, 'fa-check-square-o':createAssignmentModal.assignBuyer}"></i> Assign at the Buyer Level
					</button>
				</div>
				<div uib-collapse="createAssignmentModal.assignBuyer">
					<ordercloud-search servicename="UserGroups" controlleras="createAssignmentModal"></ordercloud-search>
					<div class="well well-lg text-center" ng-if="!createAssignmentModal.list.Items.length">
						<b><i class="fa fa-search"></i> No UserGroups match your search</b>
					</div>
					<section class="table-fixed-header" ng-if="createAssignmentModal.list.Items.length">
						<div class="table-header-bg"></div>
						<div class="table-container" ordercloud-infinite-scroll servicename="UserGroups" controlleras="createAssignmentModal" style="max-height:160px;">
							<table class="table table-hover">
								<colgroup>
									<col class="action-column"/>
								</colgroup>
								<thead>
								<tr>
									<th>
									</th>
									<th>
										<div>ID</div>
									</th>
									<th>
										<div>Name</div>
									</th>
								</tr>
								</thead>
								<tbody>
								<tr ng-repeat="group in createAssignmentModal.list.Items track by $index">
									<td class="text-center">
										<input type="checkbox" ng-model="group.selected">
									</td>
									<td>{{group.ID}}</td>
									<td>{{group.Name}}</td>
								</tr>
								</tbody>
							</table>
						</div>
					</section>
				</div>
			</div>
			<div class="col-sm-6" uib-collapse="createAssignmentModal.assignBuyer" ng-if="createAssignmentModal.list.Items.length  || (!createAssignmentModal.list.Items.length && createAssignmentModal.groupSearchTerm)">
				<div class="well well-lg text-center" ng-if="!(createAssignmentModal.list.Items | filter:{selected:true}).length">
					<b>No User Group(s) Selected</b>
				</div>
				<section class="table-fixed-header"  ng-if="(createAssignmentModal.list.Items | filter:{selected:true}).length">
					<div class="table-header-bg"></div>
					<div class="table-container" style="max-height:160px;">
						<table class="table table-hover">
							<colgroup>
								<col class="action-column"/>
							</colgroup>
							<thead>
							<tr>
								<th>
									ID<div>ID</div>
								</th>
								<th>
									Name<div>Name</div>
								</th>
							</tr>
							</thead>
							<tbody>
							<tr ng-repeat="group in createAssignmentModal.list.Items | filter:{selected:true} track by $index">
								<td>{{group.ID}}</td>
								<td>{{group.Name}}</td>
							</tr>
							</tbody>
						</table>
					</div>
				</section>
			</div>
		</div>
	</div>

	<h3>Choose the price schedule(s)</h3>
	<p class="text-muted">Each product assignment can have one Standard and/or one Replenishment price schedule. You must choose at least one.</p>
	<div class="row">
		<div class="col-sm-6" ng-show="(createAssignmentModal.priceSchedules | filter:{OrderType:'Standard'}).length">
			<h4>Standard Price Schedules</h4>
			<ul class="list-group">
				<li class="list-group-item" ng-repeat="priceSchedule in createAssignmentModal.priceSchedules | filter:{OrderType:'Standard'} track by $index" ng-class="{active: priceSchedule.ID == createAssignmentModal.StandardPriceScheduleID}" ng-click="createAssignmentModal.toggleStandardPS(priceSchedule.ID)">
					{{priceSchedule.ID}}
				</li>
			</ul>
		</div>
		<div class="col-sm-6" ng-show="(createAssignmentModal.priceSchedules | filter:{OrderType:'Replenishment'}).length">
			<h4>Replenishment Price Schedules</h4>
			<ul class="list-group">
				<li class="list-group-item" ng-repeat="priceSchedule in createAssignmentModal.priceSchedules | filter:{OrderType:'Replenishment'} track by $index" ng-class="{active: priceSchedule.ID == createAssignmentModal.ReplenishmentPriceScheduleID}" ng-click="createAssignmentModal.toggleReplenishmentPS(priceSchedule.ID)">
					{{priceSchedule.ID}}
				</li>
			</ul>
		</div>
		<div ng-include="'products/templates/productPriceSchedules.tpl.html'"></div>
	</div>

	<!--<button type="button" class="btn btn-default" ng-click="createAssignmentModal.cancel()">Cancel</button>-->
	<button type="button" class="btn btn-primary" ng-click="createAssignmentModal.saveAssignment()" ng-disabled="!(((createAssignmentModal.list.Items | filter:{selected:true}).length || createAssignmentModal.assignBuyer) && (createAssignmentModal.StandardPriceScheduleID || createAssignmentModal.ReplenishmentPriceScheduleID))">Save Assignment</button>
</div>

